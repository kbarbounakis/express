{"version":3,"sources":["../../../server/listeners/set-user-credentials-listener.js"],"names":["beforeSave","event","callback","afterSave","state","target","hasOwnProperty","model","context","silent","insert","Object","assign","userCredentials","id","then","catch","err"],"mappings":"0IAAA;;;;AAIO,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,QAA3B,EAAqC;AACxC,SAAOA,QAAQ,EAAf;AACH;;AAED;;;;AAIO,SAASC,SAAT,CAAmBF,KAAnB,EAA0BC,QAA1B,EAAoC;AACvC,MAAID,KAAK,CAACG,KAAN,KAAgB,CAAhB,IAAqBH,KAAK,CAACI,MAA3B,IAAqCJ,KAAK,CAACI,MAAN,CAAaC,cAAb,CAA4B,iBAA5B,CAAzC,EAAyF;AACrF,WAAOL,KAAK,CAACM,KAAN,CAAYC,OAAZ,CAAoBD,KAApB,CAA0B,gBAA1B;AACFE,IAAAA,MADE;AAEFC,IAAAA,MAFE,CAEKC,MAAM,CAACC,MAAP,CAAcX,KAAK,CAACI,MAAN,CAAaQ,eAA3B,EAA4C;AAChDC,MAAAA,EAAE,EAAEb,KAAK,CAACI,MAAN,CAAaS,EAD+B,EAA5C,CAFL;;AAKFC,IAAAA,IALE,CAKG,MAAM;AACT,aAAOb,QAAQ,EAAf;AACF,KAPE;AAQFc,IAAAA,KARE,CAQKC,GAAG,IAAI;AACZ,aAAOf,QAAQ,CAACe,GAAD,CAAf;AACF,KAVE,CAAP;AAWH;AACD,SAAOf,QAAQ,EAAf;AACH","sourcesContent":["/**\n * @param {DataEventArgs} event\n * @param {Function} callback\n */\nexport function beforeSave(event, callback) {\n    return callback();\n}\n\n/**\n * @param {DataEventArgs} event\n * @param {Function} callback\n */\nexport function afterSave(event, callback) {\n    if (event.state === 1 && event.target && event.target.hasOwnProperty('userCredentials')) {\n        return event.model.context.model('UserCredential')\n            .silent()\n            .insert(Object.assign(event.target.userCredentials, {\n                id: event.target.id\n            }))\n            .then(() => {\n               return callback();\n            })\n            .catch( err => {\n               return callback(err);\n            });\n    }\n    return callback();\n}\n"],"file":"set-user-credentials-listener.js"}